# מחשבון ציוני ספורט - בית הספר הריאלי

אתר לחישוב ציוני מבחני ספורט לתלמידי תיכון.

## הרצת האתר

**לשימוש בפועל, יש להעלות את כל הקבצים לשרת אינטרנט.**

## קבצי תצורה

האתר ניתן להרחבה מלאה על ידי עריכת קבצי CSV:

### 1. `options.csv` - אפשרויות שכבה ומגדר

קובץ זה מגדיר את האפשרויות לבחירת שכבה ומגדר:

```csv
field,value,label
grade,9,כיתה ט'
grade,10,כיתה י'
grade,11,כיתה יא'
grade,12,כיתה יב'
gender,boys,בנים
gender,girls,בנות
```

**העמודות:**
- `field` - סוג השדה (grade/gender)
- `value` - הערך הפנימי
- `label` - התווית בעברית

### 2. `fields.csv` - הגדרת מבחנים

קובץ זה מגדיר את סוגי המבחנים והוראות הקלט עבורם:

```csv
value,label,description,input_format
2000m,ריצת 2000 מטר,הזן את הזמן בפורמט דקות:שניות (לדוגמה: 8:30),time
pullups,מתח,הזן את מספר החזרות שביצעת,count
4x10m,ריצת 4x10 מטר,הזן את הזמן בפורמט שניות (לדוגמה: 12.5),seconds
long_jump,קפיצה לרוחק,הזן את המרחק במטרים (לדוגמה: 2.5),decimal
```

**העמודות:**
- `value` - מזהה המבחן (ישמש גם כשם קובץ הציונים)
- `label` - התווית בעברית
- `description` - הוראות למשתמש
- `input_format` - סוג הקלט

**ערכי `input_format` אפשריים:**
- `time` - זמן בפורמט דקות:שניות, נמוך יותר = טוב יותר (לדוגמה: 8:30)
- `seconds` - זמן בשניות, נמוך יותר = טוב יותר (לדוגמה: 12.5)
- `count` - מספר חזרות (מספרים שלמים), גבוה יותר = טוב יותר (לדוגמה: 20)
- `decimal` - ערכים עשרוניים, גבוה יותר = טוב יותר (לדוגמה: 2.5) - למרחקים, משך זמן, רמות

### 3. `scores/` - תיקיית נתוני ציונים

תיקייה זו מכילה קובץ CSV נפרד לכל מבחן. שם הקובץ חייב להתאים לערך ה-`value` מקובץ `fields.csv`.

**דוגמה: `scores/2000m.csv`**

```csv
final_score,boys_grade9,boys_grade10,boys_grade11,boys_grade12,girls_grade9,girls_grade10,girls_grade11,girls_grade12
100,7:50,7:30,7:19,7:07,10:00,9:50,9:40,9:40
99,7:52,7:32,7:21,7:09,10:03,9:53,9:43,9:43
98,7:54,7:34,7:23,7:11,10:06,9:56,9:46,9:46
...
51,12:48,12:28,8:17,12:05,18:58,18:18,17:36,17:36
50,12:50,12:30,8:19,12:07,19:00,18:20,17:38,17:38
```

**העמודות:**
- `final_score` - הציון הסופי (100 עד 50)
- `boys_grade9` - הביצוע הנדרש לציון זה עבור בנים כיתה ט'
- `boys_grade10` - הביצוע הנדרש לציון זה עבור בנים כיתה י'
- `boys_grade11` - הביצוע הנדרש לציון זה עבור בנים כיתה יא'
- `boys_grade12` - הביצוע הנדרש לציון זה עבור בנים כיתה יב'
- `girls_grade9` - הביצוע הנדרש לציון זה עבור בנות כיתה ט'
- `girls_grade10` - הביצוע הנדרש לציון זה עבור בנות כיתה י'
- `girls_grade11` - הביצוע הנדרש לציון זה עבור בנות כיתה יא'
- `girls_grade12` - הביצוע הנדרש לציון זה עבור בנות כיתה יב'

**חישוב הציון:**
- המערכת משווה את ביצוע התלמיד לטבלת הציונים ומחזירה את הציון המתאים:
- עבור מבחני זמן (time/seconds): ביצוע טוב יותר = זמן נמוך יותר
- עבור מבחני ספירה/מרחק (count/decimal): ביצוע טוב יותר = מספר גבוה יותר
- טווח הציונים: 50-100
- ביצוע טוב מציון 100 = מקבל 100
- ביצוע גרוע מציון 50 = מקבל 50
- **פערים בטבלה:** ניתן להשתמש בערך `0` או שדה ריק כדי לדלג על ציון מסוים עבור קבוצה מסוימת (למשל, אם מבחן מסוים לא רלוונטי לשכבה או מגדר מסוים). אפליקציות החישוב ממירות ערך `0` ל"ריק" ומדלגות עליו בעת מציאת הציון, אחרת ערכים אפסיים היו תופסים את הדרגה הגבוהה ביותר.

הערות חשובות על חישוב והתנהגות:
- הציון המינימלי הוא 50 (לא 55).
- חישובים פנימיים מעגלים כלפי מטה (Math.floor) לפני הצגת התוצאה הסופית.
- עבור מבחני מסוג `count` (חזרות) ניתן להזין `0` כתוצאה — זה קביל ואינו נחשב לשגיאה.

---

### דף ציון סופי (`finalGrade.html`)

הדף מיועד לחישוב ציון סופי עבור **כיתה יב' בלבד**. הוא **לא כולל שדה לבחירת שכבה**; השכבה מוגדרת בקוד כ־`12`. משתמשים מתבקשים לבחור **מגדר** (בנים/בנות) לפני החישוב. רק מבחנים שיופיעו ב־`test_weights.csv` עם משקל גדול מ‑0 יוצגו ויישמשו בחישוב הציון הסופי.

הערה: ה־CSV `test_weights.csv` מכיל שדות `test_type`, `label` ו־`weight_percent` בדיוק כמו בדף המחשבון, אבל בחישוב ציון סופי משוקלל נשקלים רק הפריטים עם משקל חיובי.

## הוספת מבחן חדש

לדוגמה, נוסיף מבחן "קפיצה לגובה":

### שלב 1: הוסף הגדרה ל-`fields.csv`
```csv
high_jump,קפיצה לגובה,הזן את הגובה במטרים (לדוגמה: 1.5),decimal
```

### שלב 2: צור קובץ ציונים `scores/high_jump.csv`
```csv
final_score,boys_grade9,boys_grade10,boys_grade11,boys_grade12,girls_grade9,girls_grade10,girls_grade11,girls_grade12
100,1.8,1.9,2.0,2.1,1.5,1.6,1.65,1.7
99,1.78,1.88,1.98,2.08,1.48,1.58,1.63,1.68
98,1.76,1.86,1.96,2.06,1.46,1.56,1.61,1.66
...
51,1.22,1.32,1.42,1.52,1.02,1.12,1.17,1.22
50,1.2,1.3,1.4,1.5,1.0,1.1,1.15,1.2
```

**טיפים:**
- הקובץ חייב להכיל 51 שורות (ציונים 100-50)
- הערכים צריכים להיות מסודרים בצורה לוגית (פוחתים או עולים בהתאם לסוג המבחן)
- ודא שהערכים מייצגים טווח ביצועים ריאלי
- ניתן להשתמש בערך `0` או שדה ריק כדי לדלג על ציונים מסוימים (למשל, אם מבחן לא רלוונטי לשכבה מסוימת)

## ציון סופי (finalGrade)

קיים עמוד חדש `finalGrade.html` שמחשב ציון סופי משוקלל מבוסס על משקלים לכל מבחן.

- דף `finalGrade.html` מציג **בקשה למגדר בלבד**; השכבה קבועה בקוד כ-כיתה י"ב ולא מוצגת למשתמש.
- קובץ התצורה `test_weights.csv` מגדיר את המשקל (אחוז) לכל `test_type`:

```csv
test_type,label,weight_percent
run2000,ריצת 2000 מטר,30
pullups,מתח,10
... 
```

- רק מבחנים עם `weight_percent` גדול מ-0 יוצגו בעמוד ה-`finalGrade` ויתבקשו תוצאותיהם.
- המשקלים לא חייבים לסכום ל-100; המערכת מפרמטרת (normalizes) את סכום המשקל בפועל לפני חישוב הציון.
- אם קובץ ה-`scores/<test_type>.csv` חסר עבור מבחן נתון, אותו מבחן מדלגים ממנו והמשקל שלו מוסר לפני נרמול.
- קלטי המשתמש נבדקים באמצעות אותן כללי אימות כמו ב-`calculator.js` (פורמטים: `time`, `seconds`, `count`, `decimal`).
- עבור `count`, `0` קביל; עבור `time` יש להשתמש ב-MM:SS; עבור `seconds`/`decimal` יש להזין מספר חיובי.

הקבצים החדשים המשויכים לעמוד זה:
- `finalGrade.html` — ממשק המשתמש
- `finalGrade.js` — לוגיקת בניית הקלטים, אימות קלטים, קריאת CSV ומחשבון ציון סופי
- `test_weights.csv` — הגדרת משקלים לכל מבחן

## התנהגות חישוב סופי

- לכל מבחן המערכת ממפה את הביצוע לציון בין 100 ל-50 באמצעות קובץ ה-`scores` המתאים.
- הציון הסופי המחושב הוא ממוצע משוקלל של ציוני המבחנים (כאשר כל ציוני מבחן מוכפלים במשקלם המתאים ומשוררים), ולאחר מכן מנורמל (אם יש צורך) ומעוגל כלפי מטה.


זהו! המבחן החדש יופיע אוטומטית באתר, ממוין אלפבתית.

## מבנה הקבצים

```
reali-sports/
├── index.html          # עמוד HTML ראשי
├── styles.css          # עיצוב האתר
├── calculator.js       # לוגיקת החישוב
├── options.csv         # אפשרויות שכבה ומגדר
├── fields.csv          # הגדרות מבחנים
├── scores/             # תיקיית קבצי ציונים
│   ├── 1000m.csv
│   ├── 1500m.csv
│   ├── 2000m.csv
│   ├── 3000m.csv
│   ├── 4x10m.csv
│   ├── beep_test.csv
│   ├── long_jump.csv
│   ├── plank.csv
│   ├── pullups.csv
│   ├── pushups.csv
│   ├── seat_ups.csv
│   ├── skipping_rope.csv
│   └── squats.csv
└── README.md           # קובץ זה
```

## טכנולוגיות

- HTML5
- CSS3 (עיצוב מבוסס על אתר הריאלי)
- JavaScript (Vanilla JS, ללא תלויות)
- CSV לאחסון נתונים
